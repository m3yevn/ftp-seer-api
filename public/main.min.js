function popupmenu(){let menu=document.getElementById("menu--mobile");menu.classList.add("active")}function closemenu(){let menu=document.getElementById("menu--mobile");menu.classList.remove("active")}async function convertMarkdown(text){const result= await fetch("https://api.github.com/markdown/raw",{method:"POST",headers:{'Content-Type':'text/plain'},body:text});if(!result){return};return result.text()}async function getAbout(){const result= await fetch("https://raw.githubusercontent.com/m3yevn/ftp-seer/master/README.md");if(!result){return};const markdown= await result.text();const html= await convertMarkdown(markdown);if(!html){return};let about=document.getElementById("about");if(html.includes("API rate limit exceeded for")){about.innerHTML=  await fetch("about.html").then((result)=>{return result.text()});return};about.innerHTML= html}function gotoroutes(){window.location.href= "/api"}function updateFormInputs(){const selectedServer=document.querySelector('input[name="ftp-server"]:checked').value;const directoryInput=document.getElementById("input__directory");const fileInput=document.getElementById("input__file");switch(selectedServer){case 'drivehq':directoryInput.value= "host=ftp.drivehq.com&path=.";fileInput.value= "host=ftp.drivehq.com&path=ftp_help.htm";break;case 'rebex':directoryInput.value= "host=test.rebex.net&path=.";fileInput.value= "host=test.rebex.net&path=readme.txt";break;case 'custom':directoryInput.value= "host=your-ftp-server.com&path=.";fileInput.value= "host=your-ftp-server.com&path=filename.txt";break}}function hideNavbar(){let currentScrollPos=window.pageYOffset;if(prevScrollpos> currentScrollPos){document.getElementById("navbar").style.top= "0"}else {document.getElementById("navbar").style.top= "-60px"};prevScrollpos= currentScrollPos}async function fetchDirectory(){let input_directory=document.getElementById("input__directory").value;let json_result=document.getElementById("textarea__json__result");let btn_directory=document.getElementById("btn__fetch__directory");let btn_file=document.getElementById("btn__fetch__file");window.location= '#response';try{btn_directory.setAttribute('disabled',true);btn_file.setAttribute('disabled',true);btn_directory.innerText= "Fetching...";btn_file.innerText= "Fetching...";json_result.innerText= "Fetching...";const result= await fetch("api/directory?"+ input_directory);if(!result){return};const innerText= await result.json();json_result.innerText= JSON.stringify(innerText)}catch(ex){json_result.innerText= ex.message}finally{btn_directory.removeAttribute('disabled');btn_file.removeAttribute('disabled');btn_directory.innerText= "Fetch!";btn_file.innerText= "Fetch!"}}async function fetchFile(){let input_file=document.getElementById("input__file").value;let json_result=document.getElementById("textarea__json__result");let btn_directory=document.getElementById("btn__fetch__directory");let btn_file=document.getElementById("btn__fetch__file");window.location.href= '#response';try{btn_directory.setAttribute('disabled',true);btn_file.setAttribute('disabled',true);btn_directory.innerText= "Fetching...";btn_file.innerText= "Fetching...";json_result.innerText= "Fetching...";const result= await fetch("api/file?"+ input_file);if(!result){return};const innerText= await result.json();json_result.innerText= JSON.stringify(innerText)}catch(ex){json_result.innerText= ex.message}finally{btn_directory.removeAttribute('disabled');btn_file.removeAttribute('disabled');btn_directory.innerText= "Fetch!";btn_file.innerText= "Fetch!"}}async function getContributors(){let contributors=document.getElementById("list__contributors");const result= await fetch("https://api.github.com/repos/m3yevn/ftp-seer/contributors");if(!result){return};const contributorsList= await result.json();let html="";contributorsList.forEach((contributor)=>{if(contributor.type!== "Bot"){const avatar=`<div class="avatar pure-u-2-12"><img src="${contributor.avatar_url}" alt="${contributor.login}" onclick="routeToGithub('${contributor.html_url}')" /></div>`;html+= avatar}});contributors.innerHTML= html}let prevScrollpos=window.pageYOffset;window.onload= ()=>{getAbout();getContributors()};window.onscroll= ()=>{hideNavbar()};window.onhashchange= ()=>{closemenu()}